{"version":3,"file":"ng-code-verification.umd.js","sources":["../../../projects/ng-code-verification/src/lib/code.ts","../../../projects/ng-code-verification/src/lib/codes.ts","../../../projects/ng-code-verification/src/lib/ng-code-verification.component.ts","../../../projects/ng-code-verification/src/lib/ng-code-verification.module.ts","../../../projects/ng-code-verification/src/public-api.ts","../../../projects/ng-code-verification/src/ng-code-verification.ts"],"sourcesContent":["import { FormControl, Validators } from '@angular/forms';\n\nexport default class Code {\n\n    static numberSeq = 1;\n    private pError: boolean;\n    private pFormControl: FormControl;\n    private pValue: number;\n    private pId: string;\n\n    constructor()\n    {\n        this.pFormControl = new FormControl('', Validators.required);\n        this.pId = 'field_'  + Code.numberSeq;\n        Code.numberSeq ++;\n\n        console.log('static varibale', Code.numberSeq);\n    }\n\n    /**\n     * Get Error\n     */\n    public get error(): boolean\n    {\n        return this.pError;\n    }\n\n    /**\n     * Set Error\n     */\n    public set error(value: boolean)\n    {\n        this.pError = value;\n    }\n\n    /**\n     * Get FormControl\n     */\n    public get formControl(): FormControl\n    {\n        return this.pFormControl;\n    }\n\n    /**\n     * Get Value\n     */\n    public get value(): number\n    {\n        return this.pValue;\n    }\n\n    /**\n     * Set Value\n     */\n    public set value(valueTemp: number)\n    {\n        this.pValue = valueTemp;\n    }\n\n    /**\n     * Get ID\n     */\n    public get id(): string\n    {\n        return this.pId;\n    }\n\n    \n}\n","import Code from './code';\n\nexport default class Codes {\n\n    public el: Code[];\n    public index = 0;\n\n    constructor(qtde: number)\n    {\n        this.el = Array.from({length: qtde}, () => new Code());\n    }\n\n    next(evt): void\n    {\n        const idEl = parseInt(evt.srcElement.id.split('_')[1], 0);\n\n        // update value\n        this.el[idEl - 1].value = evt.target.value;\n\n        const nextEl = idEl < this.el.length ? (idEl + 1) : this.el.length;\n        const el = document.getElementById('field_' + nextEl) as HTMLInputElement;\n        el.focus();\n\n        if (nextEl < this.el.length){\n            el.value = '';\n        }\n    }\n\n    getArrayCodes(): string[]\n    {\n        return this.el.map(elTemp => elTemp.value ? elTemp.value.toString() : '');\n    }\n\n    getCode(): string\n    {\n        return this.getArrayCodes().join('');\n    }\n\n    validCodes(): boolean\n    {\n        const errors = this.el.map(elTemp => !elTemp.value ? false : true);\n        let valid = true;\n        errors.forEach((value, index) => {\n            if (!value)\n            {\n                this.setError(index + 1, true);\n                valid = false;\n            }\n            else {\n                this.setError(index + 1, false);\n            }\n        });\n\n        return valid;\n    }\n\n    setError(idTemp, value): void\n    {\n        this.el[idTemp - 1].error = value;\n    }\n\n}\n","import { Component, OnInit, Input, ViewChildren, QueryList, ElementRef, Output, EventEmitter } from '@angular/core';\nimport Codes from './codes';\n\n@Component({\n  selector: 'ng-code-verification',\n  template: `\n    <div #formCode>\n      <input\n        type=\"text\"\n        maxlength=\"1\"\n        class=\"codeInput\"\n        *ngFor=\"let codeTemp of codes.el\"\n        [formControl]=\"codeTemp.formControl\"\n        [id]=\"codeTemp.id\"\n        (input)=\"onInput($event)\"\n        [class.is-invalid]=\"codeTemp.error\"\n        maxlength=\"1\"\n      />\n    </div>\n  `,\n  styleUrls: ['./ng-code-verification.css']\n})\nexport class NgCodeVerificationComponent implements OnInit {\n\n  @ViewChildren('formCode') formCode: QueryList<ElementRef>;\n  @Output() codeComplete = new EventEmitter<{ code: string, valid: boolean}>();\n  @Input() codeTotal = 0;\n  codes: Codes;\n\n  constructor() {}\n\n  ngOnInit(): void {\n    this.codes = new Codes(this.codeTotal);\n  }\n\n  onInput(evt): void\n  {\n    this.codes.next(evt);\n    this.onCodeCompleted();\n\n    if (this.checkIfLast(evt))\n    {\n      this.onCodeCompleted();\n    }\n  }\n\n  public checkIfLast(evt): boolean\n  {\n    const id = parseInt(evt.srcElement.id.split('_')[1], 0);\n    return id >= this.codes.el.length ? true : false;\n  }\n\n  public onCodeCompleted(): void\n  {\n    this.codeComplete.emit(\n      {\n        code: this.codes.getCode(), \n        valid: this.codes.validCodes()\n      }\n    );\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { NgCodeVerificationComponent } from './ng-code-verification.component';\n\n\n\n@NgModule({\n  declarations: [NgCodeVerificationComponent],\n  imports: [\n    BrowserModule\n  ],\n  exports: [NgCodeVerificationComponent]\n})\nexport class NgCodeVerificationModule { }\n","/*\n * Public API Surface of ng-code-verification\n */\n\nexport * from './lib/ng-code-verification.component';\nexport * from './lib/ng-code-verification.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["FormControl","Validators","EventEmitter","Component","ViewChildren","Output","Input","NgModule","BrowserModule"],"mappings":"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"}